(()=>{var e={784(){!function(){function e(){var e=document.getElementById("filemanager-picker-overlay");if(e){e.style.display="none",e.setAttribute("aria-hidden","true");var t=e.querySelector(".filemanager-picker-iframe");t&&(t.src="about:blank")}}function t(e,t){e&&(e.value=t||"",e.dispatchEvent(new Event("input",{bubbles:!0})))}function n(n){if(n.origin===window.location.origin){var r=n.data;if(r&&"keyboardman.filemanager.picked"===r.type&&r.channel)for(var a=document.querySelectorAll(".filemanager-picker-widget"),i=function(){if(a[l].getAttribute("data-channel")===r.channel){var n=a[l].querySelector("input"),i=a[l].getAttribute("data-value-type")||"path",o=r.path||"",c=null!=r.filesystem?r.filesystem:"default";if("url"===i){var d=a[l].getAttribute("data-resolve-url");if(d){var u=d+(-1!==d.indexOf("?")?"&":"?")+"filesystem="+encodeURIComponent(c)+"&path="+encodeURIComponent(o);fetch(u).then(function(e){return e.json()}).then(function(r){t(n,r.url||""),e()}).catch(function(){t(n,c+":"+o),e()})}else t(n,c+":"+o),e()}else t(n,c+":"+o),e();return 1}},l=0;l<a.length&&!i();l++);}}function r(){window.addEventListener("message",n),document.querySelectorAll(".filemanager-picker-widget").forEach(function(t){var n=t.querySelector(".filemanager-picker-btn");n&&n.addEventListener("click",function(){!function(t){var n=t.getAttribute("data-picker-url")||"/filemanager",r=t.getAttribute("data-channel")||"",a=t.getAttribute("data-resolve-url")||"",i=(-1!==n.indexOf("?")?n+"&":n+"?")+"picker=1&channel="+encodeURIComponent(r);a&&(i+="&resolve_url="+encodeURIComponent(a));var l=document.getElementById("filemanager-picker-overlay");l||((l=document.createElement("div")).id="filemanager-picker-overlay",l.className="filemanager-picker-overlay",l.setAttribute("aria-hidden","true"),l.innerHTML='<div class="filemanager-picker-dialog" role="dialog"><button type="button" class="filemanager-picker-close" aria-label="Fermer">&times;</button><iframe title="Choisir un fichier" class="filemanager-picker-iframe"></iframe></div>',document.body.appendChild(l),l.querySelector(".filemanager-picker-close").addEventListener("click",e),l.addEventListener("click",function(t){t.target===l&&e()}),document.addEventListener("keydown",function(t){"Escape"===t.key&&"false"===l.getAttribute("aria-hidden")&&e()})),l.querySelector(".filemanager-picker-iframe").src=i,l.style.display="flex",l.setAttribute("aria-hidden","false")}(t)})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(784)})()})();